# Tiled Ensemble Prediction Configuration
# 预测配置文件

# ============================================================================
# 路径配置
# ============================================================================
paths:
  checkpoint_dir: "results/PatchCore/pcb/latest/weights/lightning"  # 模型checkpoint目录
  input_dir: "datasets/pcb/predict"                                 # 预测图片输入目录
  output_dir: "datasets/pcb/predict_results"                        # 结果输出目录

# ============================================================================
# 图像处理参数
# ============================================================================
image:
  image_size: 512          # 完整图像尺寸
  tile_size: 256           # 每个tile尺寸

# ============================================================================
# PCB 裁剪配置
# ============================================================================
pcb_crop:
  enable: true             # 是否启用PCB背景裁剪
  padding: 10              # 裁剪边距（像素）
  min_area_ratio: 0.1      # PCB最小面积占比

# ============================================================================
# 接缝平滑配置
# ============================================================================
seam_smoothing:
  apply: true              # 是否对tile接缝区域做高斯平滑
  sigma: 2                 # 高斯核的sigma
  width: 0.1               # 接缝平滑区域宽度占比（相对tile边长）

# ============================================================================
# ROI 配置
# ============================================================================
roi:
  enable: true             # 是否使用ROI mask
  config_path: null        # ROI配置文件路径（null=在预测前选择，或使用 "roi.json"）

# ============================================================================
# 判断阈值配置
# ============================================================================
threshold:
  normalized_threshold: 0.5    # 整体分数阈值（标准值）
                               # 分数 >= threshold → NG (异常)
                               # 分数 < threshold → OK (正常)

# ============================================================================
# 其他配置
# ============================================================================
device: "cuda"             # 设备选择: "cuda" 或 "cpu"

